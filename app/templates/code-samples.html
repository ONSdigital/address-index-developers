{% extends "base.html" %}

{% block title %}Code Samples{% endblock %}

{% block content %}
<h1 class="jupiter">Code Samples</h1>

<div class="markdown">

    <p>The following code examples should enable you to get started with using the API.</p>

    <p>In both cases, #API_URL# and #API_KEY# should be replaced with the actual values, appropriate to the environment and user.</p>

    <h2 class="saturn">R</h2>

    <pre><code># Load libraries
    library(httr)
    library(jsonlite)

    # Call the API
    call <- httr::GET("#API_URL#/addresses?input=7 Gate Reach, Exeter, EX2 6GA",
                      add_headers(Authorization = "#API_KEY#"))

    # Retrieve the contents of the call
    content <- httr::content(call, as = "text")

    # Convert the contents from JSON to an R object
    results <- jsonlite::fromJSON(content, flatten = TRUE)</code></pre>

    <h2 class="saturn">Python</h2>

    <p>The python example requires the <a href="http://docs.python-requests.org/en/master/" class="icon--external-link">requests</a> library</p>

    <p>The print function is included so the result can be seen in the console only, and should be removed for actual use.</p>

    <pre><code>import json
    import requests

    api_url = "#API_URL#"
    endpoint = "/addresses"
    search_term = "" #Only used for UPRN, Partial and Postcode endpoints
    header = {"Content-Type": "application/json", 'Authorization': "#API_KEY#"}
    params = "input=7 Gate Reach, Exeter, EX2 6GA&verbose=true"

    request = api_url + endpoint + search_term


    def get_addresses():

        response = requests.get(request, params=params, headers=header)
        json_response = json.loads(response.text)

        print(json_response)

        return json_response

    if __name__ == '__main__':
        get_addresses()</code></pre>

</div>

{% endblock %}
